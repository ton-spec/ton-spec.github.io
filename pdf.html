<!DOCTYPE html>
<html>
<head>
  <title>PDF to Text</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
</head>
<body>
  <h2>Upload a PDF</h2>
  <input type="file" id="fileInput">
  <div id="textDisplayArea"></div>
<button onclick="downloadText()">Download Text</button>
  
  <script>
    fileReader.onload = function() {
    const typedarray = new Uint8Array(fileReader.result);
    PDFJS.getDocument(typedarray).promise.then(function(pdf) {
        let textContent = '';

        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
            pdf.getPage(pageNum).then(function(page) {
                return page.getTextContent();
            }).then(function(content) {
                content.items.forEach(function(item) {
                    textContent += item.str + ' ';
                });
                textContent += '\n'; // Add a new line after each page
                document.getElementById('textDisplayArea').innerText = textContent;
                document.getElementById('textDisplayArea').setAttribute('id', 'displayedText'); // Set a new ID
            });
        }
    });
};

fileReader.readAsArrayBuffer(file);





function downloadText() {
      // Get the text content you want to download
      var textContent = document.getElementById('displayedText').innerText;

      // Create a Blob containing the text
      var blob = new Blob([textContent], { type: 'text/plain' });

      // Create a link element
      var link = document.createElement('a');
      link.download = 'downloaded_text.txt'; // Set the filename for the downloaded file
      link.href = window.URL.createObjectURL(blob);
      link.click();
    }
    
  </script>
</body>
</html>
